{% extends "layout/page.html" %}

{% block css %}
<style>
    .cart-item {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
    }
    .product-image {
        width: 50px;
        height: auto;
        border-radius: 4px;
    }
    .total {
        font-weight: bold;
    }
</style>
{% endblock %}

{% block content %}
<div id="wrapper">
    <h2>Your Shopping Cart</h2>
    {% if cart.items %}
        <div class="cart-items">
            {% for item in cart.items %}
                <div class="cart-item">
                    <div>
                        <img src="{{ item.image_url if item.image_url else '/static/images/default_product.png' }}" class="product-image" alt="{{ item.name }}">
                        <span>{{ item.name }}</span> (Quantity: {{ item.quantity }})
                    </div>
                    <div>
                        <span>Price: {{ item.total_price | currency }}</span>
                        <form action="{{ url_for('cart.remove_from_cart', product_id=item.product_id) }}" method="post">
                            <button type="submit">Remove</button>
                        </form>
                    </div>
                </div>
            {% endfor %}
        </div>
        <div class="total">
            Total: {{ cart.total_price | currency }}
        </div>
        <a href="{{ url_for('cart.checkout') }}" class="button">Proceed to Checkout</a>
    {% else %}
        <p>Your cart is empty!</p>
    {% endif %}
</div>
{% endblock %}
